"use strict";(self.webpackChunk_pamfilico_feedback=self.webpackChunk_pamfilico_feedback||[]).push([[951],{"./src/material/MaterialFeedbackButton.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BottomCenter:()=>BottomCenter,BottomLeft:()=>BottomLeft,Default:()=>Default,FormAsDialog:()=>FormAsDialog,LeftMiddle:()=>LeftMiddle,ParentPositioning:()=>ParentPositioning,RightMiddle:()=>RightMiddle,TopCenter:()=>TopCenter,TopLeft:()=>TopLeft,TopRight:()=>TopRight,__namedExportsOrder:()=>__namedExportsOrder,default:()=>MaterialFeedbackButton_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),useTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/useTheme.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/esm/useMediaQuery/index.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Feedback=__webpack_require__("./node_modules/@mui/icons-material/esm/Feedback.js"),dynamic=__webpack_require__("./node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),Dialog=__webpack_require__("./node_modules/@mui/material/esm/Dialog/Dialog.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/esm/DialogContent/DialogContent.js"),Drawer=__webpack_require__("./node_modules/@mui/material/esm/Drawer/Drawer.js"),IconButton=__webpack_require__("./node_modules/@mui/material/esm/IconButton/IconButton.js"),Chip=__webpack_require__("./node_modules/@mui/material/esm/Chip/Chip.js"),Fab=__webpack_require__("./node_modules/@mui/material/esm/Fab/Fab.js"),FormControl=__webpack_require__("./node_modules/@mui/material/esm/FormControl/FormControl.js"),InputLabel=__webpack_require__("./node_modules/@mui/material/esm/InputLabel/InputLabel.js"),Select=__webpack_require__("./node_modules/@mui/material/esm/Select/Select.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/esm/MenuItem/MenuItem.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),ArrowBack=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowBack.js"),Save=__webpack_require__("./node_modules/@mui/icons-material/esm/Save.js"),PhoneAndroid=__webpack_require__("./node_modules/@mui/icons-material/esm/PhoneAndroid.js"),Computer=__webpack_require__("./node_modules/@mui/icons-material/esm/Computer.js"),Tablet=__webpack_require__("./node_modules/@mui/icons-material/esm/Tablet.js"),formik_esm=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),index_esm=__webpack_require__("./node_modules/yup/index.esm.js"),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),console=__webpack_require__("./node_modules/console-browserify/index.js");const CanvasDraw=dynamic_default()(()=>__webpack_require__.e(716).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-canvas-draw/es/index.js")),{loadableGenerated:{webpack:()=>["./node_modules/react-canvas-draw/es/index.js"]},ssr:!1,loading:()=>(0,jsx_runtime.jsx)("div",{children:"Loading canvas..."})}),validationSchema=index_esm.Ik({feedbackType:index_esm.Yj().required("Feedback type is required"),description:index_esm.Yj().min(10,"Description should be at least 10 characters long").required("Description is required")});function DesktopFeedbackComponent({open,onClose,userEmail=null,apiBasePath="/api/feedback",additionalHeaders={},appId,formAsDialog=!1,screenSize}){const[image,setImage]=(0,react.useState)(""),[drawerOpen,setDrawerOpen]=(0,react.useState)(!1),[formDialogOpen,setFormDialogOpen]=(0,react.useState)(!1),canvasRef=(0,react.useRef)(null),dialogRef=(0,react.useRef)(null),handleUploadImage=(0,react.useCallback)(file=>{const reader=new FileReader;reader.onload=e=>{var _e_target;const result=null===(_e_target=e.target)||void 0===_e_target?void 0:_e_target.result;"string"==typeof result&&(setImage(result),dist.Ay.success("Screenshot uploaded successfully"))},reader.onerror=()=>{dist.Ay.error("Failed to upload screenshot")},reader.readAsDataURL(file)},[]),clearDrawing=(0,react.useCallback)(()=>{canvasRef.current&&canvasRef.current.clear()},[]),undoLastDrawing=(0,react.useCallback)(()=>{canvasRef.current&&canvasRef.current.undo()},[]),handleCloseInternal=(0,react.useCallback)(()=>{setDrawerOpen(!1),setFormDialogOpen(!1),onClose()},[onClose]),formik=(0,formik_esm.Wx)({initialValues:{feedbackType:"",description:""},validationSchema,onSubmit:async values=>{try{const currentUrl=window.location.href;let drawings=null;if(canvasRef.current){const drawingsData=canvasRef.current.getSaveData();drawings=drawingsData?JSON.parse(drawingsData):null}const payload={feedbackType:values.feedbackType,description:values.description,image,current_url:currentUrl,drawings,user_email:userEmail,material_ui_screensize:screenSize,app_id:appId},response=await fetch(apiBasePath,{method:"POST",headers:{"Content-Type":"application/json",...additionalHeaders},body:JSON.stringify(payload)});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||"Failed to submit feedback")}dist.Ay.success("Feedback submitted successfully!"),formik.resetForm(),setImage(""),handleCloseInternal()}catch(error){console.error("Error submitting feedback:",error),dist.Ay.error(error instanceof Error?error.message:"Failed to submit feedback. Please try again.")}}}),captureScreenshot=(0,react.useCallback)(async()=>{try{const{toPng}=await __webpack_require__.e(777).then(__webpack_require__.bind(__webpack_require__,"./node_modules/html-to-image/es/index.js")),screenshot=await toPng(document.body,{cacheBust:!0,pixelRatio:1,skipFonts:!0,skipAutoScale:!0,filter:node=>{var _node_classList,_node_src;return!(null===(_node_classList=node.classList)||void 0===_node_classList?void 0:_node_classList.contains("ProseMirror-separator"))&&("IMG"!==node.tagName||!(null===(_node_src=node.src)||void 0===_node_src?void 0:_node_src.includes("data:")))}});setImage(screenshot)}catch(error){console.error("Failed to take screenshot:",error),setImage(""),setDrawerOpen(!0),dist.Ay.error("Failed to capture screenshot")}},[]);react.useEffect(()=>{open?captureScreenshot():(formik.resetForm(),setImage(""),setDrawerOpen(!1),setFormDialogOpen(!1))},[open]);return(0,jsx_runtime.jsxs)(Dialog.A,{ref:dialogRef,open,onClose:handleCloseInternal,fullScreen:!0,children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{m:0,p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,jsx_runtime.jsx)(IconButton.A,{"aria-label":"back",onClick:handleCloseInternal,sx:{color:theme=>theme.palette.grey[500]},children:(0,jsx_runtime.jsx)(ArrowBack.A,{})}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,jsx_runtime.jsx)(Chip.A,{icon:"mobile"===screenSize?(0,jsx_runtime.jsx)(PhoneAndroid.A,{}):"tablet"===screenSize?(0,jsx_runtime.jsx)(Tablet.A,{}):(0,jsx_runtime.jsx)(Computer.A,{}),label:screenSize.toUpperCase(),color:"mobile"===screenSize?"success":"tablet"===screenSize?"warning":"primary",size:"small"}),(0,jsx_runtime.jsx)(Box.A,{component:"span",sx:{fontSize:"1.25rem",fontWeight:500,color:"text.secondary",fontStyle:"italic"},children:"ðŸ’¡ You can draw on the screenshot"})]}),(0,jsx_runtime.jsx)(Fab.A,{color:"primary","aria-label":"save feedback",onClick:()=>{formAsDialog?setFormDialogOpen(!0):setDrawerOpen(!0)},size:"medium",sx:{animation:"wiggle 2s ease-in-out infinite","@keyframes wiggle":{"0%, 100%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(-5deg)"},"75%":{transform:"rotate(5deg)"}}},children:(0,jsx_runtime.jsx)(Save.A,{})})]}),(0,jsx_runtime.jsxs)(DialogContent.A,{sx:{p:0,height:"calc(100vh - 64px)",overflow:"hidden",position:"relative"},children:[(0,jsx_runtime.jsx)(Drawer.Ay,{anchor:"right",open:drawerOpen,onClose:()=>setDrawerOpen(!1),variant:"temporary",ModalProps:{keepMounted:!0,container:dialogRef.current,disablePortal:!1},slotProps:{backdrop:{sx:{position:"absolute",zIndex:1300,backgroundColor:"rgba(0, 0, 0, 0.5)"}}},sx:{position:"absolute",zIndex:1400,"& .MuiDrawer-paper":{width:400,position:"absolute",height:"100%",boxSizing:"border-box",zIndex:1400}},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{height:"100%",bgcolor:"background.paper",overflowY:"auto",p:3},children:[(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"secondary",onClick:clearDrawing,fullWidth:!0,sx:{mb:2},children:"Reset Drawing"}),(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"primary",onClick:undoLastDrawing,fullWidth:!0,sx:{mb:2},children:"Undo"}),(0,jsx_runtime.jsx)(Button.A,{variant:"outlined",color:"primary",onClick:()=>setDrawerOpen(!1),fullWidth:!0,sx:{mb:3},children:"Close Form"}),(0,jsx_runtime.jsxs)("form",{onSubmit:formik.handleSubmit,children:[(0,jsx_runtime.jsxs)(FormControl.A,{fullWidth:!0,margin:"normal",children:[(0,jsx_runtime.jsx)(InputLabel.A,{id:"feedbackType-label",children:"Feedback Type"}),(0,jsx_runtime.jsxs)(Select.A,{labelId:"feedbackType-label",id:"feedbackType",name:"feedbackType",value:formik.values.feedbackType,onChange:formik.handleChange,error:formik.touched.feedbackType&&Boolean(formik.errors.feedbackType),label:"Feedback Type",children:[(0,jsx_runtime.jsx)(MenuItem.A,{value:"bug",children:"Bug"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"feature",children:"Feature Request"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"other",children:"Other"})]}),formik.touched.feedbackType&&formik.errors.feedbackType&&(0,jsx_runtime.jsx)(Box.A,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:formik.errors.feedbackType})]}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,margin:"normal",id:"description",name:"description",label:"Description",multiline:!0,rows:8,value:formik.values.description,onChange:formik.handleChange,error:formik.touched.description&&Boolean(formik.errors.description),helperText:formik.touched.description&&formik.errors.description}),(0,jsx_runtime.jsx)(Button.A,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:2},children:"Submit Feedback"})]})]})}),(0,jsx_runtime.jsx)(Dialog.A,{open:formDialogOpen,onClose:()=>setFormDialogOpen(!1),maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},children:(0,jsx_runtime.jsxs)(Box.A,{sx:{p:3},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",gutterBottom:!0,children:"Submit Feedback"}),(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"secondary",onClick:clearDrawing,fullWidth:!0,sx:{mb:2},children:"Reset Drawing"}),(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"primary",onClick:undoLastDrawing,fullWidth:!0,sx:{mb:2},children:"Undo"}),(0,jsx_runtime.jsxs)("form",{onSubmit:formik.handleSubmit,children:[(0,jsx_runtime.jsxs)(FormControl.A,{fullWidth:!0,margin:"normal",children:[(0,jsx_runtime.jsx)(InputLabel.A,{id:"formDialog-feedbackType-label",children:"Feedback Type"}),(0,jsx_runtime.jsxs)(Select.A,{labelId:"formDialog-feedbackType-label",id:"formDialog-feedbackType",name:"feedbackType",value:formik.values.feedbackType,onChange:formik.handleChange,error:formik.touched.feedbackType&&Boolean(formik.errors.feedbackType),label:"Feedback Type",children:[(0,jsx_runtime.jsx)(MenuItem.A,{value:"bug",children:"Bug"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"feature",children:"Feature Request"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"other",children:"Other"})]}),formik.touched.feedbackType&&formik.errors.feedbackType&&(0,jsx_runtime.jsx)(Box.A,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:formik.errors.feedbackType})]}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,margin:"normal",id:"formDialog-description",name:"description",label:"Description",multiline:!0,rows:8,value:formik.values.description,onChange:formik.handleChange,error:formik.touched.description&&Boolean(formik.errors.description),helperText:formik.touched.description&&formik.errors.description}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",gap:2,mt:2},children:[(0,jsx_runtime.jsx)(Button.A,{variant:"outlined",color:"primary",onClick:()=>setFormDialogOpen(!1),fullWidth:!0,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.A,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Submit Feedback"})]})]})]})}),(0,jsx_runtime.jsx)(Box.A,{sx:{width:"100%",height:"100%",position:"relative",bgcolor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:image?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("img",{src:image,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"contain",display:"block",position:"relative",zIndex:1}}),(0,jsx_runtime.jsx)(Box.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2},children:(0,jsx_runtime.jsx)(Box.A,{sx:{position:"relative",width:Math.floor(window.innerWidth),height:Math.floor(.9*window.innerHeight),pointerEvents:"auto"},children:(0,jsx_runtime.jsx)(CanvasDraw,{ref:canvasRef,canvasWidth:Math.floor(window.innerWidth),canvasHeight:Math.floor(.9*window.innerHeight),brushColor:"#ff0000",brushRadius:3,lazyRadius:0,hideGrid:!0,backgroundColor:"transparent"})})})]}):(0,jsx_runtime.jsxs)(Box.A,{sx:{textAlign:"center",px:4},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Failed to capture screenshot"}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",color:"text.secondary",sx:{mt:2,mb:3},children:"Exit this screen, take a manual screenshot, and upload it by clicking the button below."}),(0,jsx_runtime.jsxs)(Button.A,{variant:"contained",component:"label",sx:{mt:2},children:["Upload Screenshot",(0,jsx_runtime.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{var _e_target_files;const file=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0];file&&handleUploadImage(file)}})]})]})})]})]})}DesktopFeedbackComponent.__docgenInfo={description:"",methods:[],displayName:"DesktopFeedbackComponent",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},userEmail:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},apiBasePath:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"/api/feedback"',computed:!1}},additionalHeaders:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:"",defaultValue:{value:"{}",computed:!1}},appId:{required:!1,tsType:{name:"string"},description:""},formAsDialog:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},screenSize:{required:!0,tsType:{name:"union",raw:'"mobile" | "tablet" | "desktop"',elements:[{name:"literal",value:'"mobile"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"desktop"'}]},description:""}}};var MobileFeedbackComponent_console=__webpack_require__("./node_modules/console-browserify/index.js");const MobileFeedbackComponent_CanvasDraw=dynamic_default()(()=>__webpack_require__.e(716).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-canvas-draw/es/index.js")),{loadableGenerated:{webpack:()=>["./node_modules/react-canvas-draw/es/index.js"]},ssr:!1,loading:()=>(0,jsx_runtime.jsx)("div",{children:"Loading canvas..."})}),MobileFeedbackComponent_validationSchema=index_esm.Ik({feedbackType:index_esm.Yj().required("Feedback type is required"),description:index_esm.Yj().min(10,"Description should be at least 10 characters long").required("Description is required")});function MobileFeedbackComponent({open,onClose,userEmail=null,apiBasePath="/api/feedback",additionalHeaders={},appId,screenSize}){const[image,setImage]=(0,react.useState)(""),[dimensions,setDimensions]=(0,react.useState)({width:0,height:0}),canvasRef=(0,react.useRef)(null),handleUploadImage=(0,react.useCallback)(file=>{const reader=new FileReader;reader.onload=e=>{var _e_target;const result=null===(_e_target=e.target)||void 0===_e_target?void 0:_e_target.result;"string"==typeof result&&(setImage(result),dist.Ay.success("Screenshot uploaded successfully"))},reader.onerror=()=>{dist.Ay.error("Failed to upload screenshot")},reader.readAsDataURL(file)},[]),clearDrawing=(0,react.useCallback)(()=>{canvasRef.current&&canvasRef.current.clear()},[]),undoLastDrawing=(0,react.useCallback)(()=>{canvasRef.current&&canvasRef.current.undo()},[]),handleCloseInternal=(0,react.useCallback)(()=>{onClose()},[onClose]),formik=(0,formik_esm.Wx)({initialValues:{feedbackType:"",description:""},validationSchema:MobileFeedbackComponent_validationSchema,onSubmit:async values=>{try{const currentUrl=window.location.href;let drawings=null;if(canvasRef.current){const drawingsData=canvasRef.current.getSaveData();drawings=drawingsData?JSON.parse(drawingsData):null}const payload={feedbackType:values.feedbackType,description:values.description,image,current_url:currentUrl,drawings,user_email:userEmail,material_ui_screensize:screenSize,app_id:appId},response=await fetch(apiBasePath,{method:"POST",headers:{"Content-Type":"application/json",...additionalHeaders},body:JSON.stringify(payload)});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||"Failed to submit feedback")}dist.Ay.success("Feedback submitted successfully!"),formik.resetForm(),setImage(""),handleCloseInternal()}catch(error){MobileFeedbackComponent_console.error("Error submitting feedback:",error),dist.Ay.error(error instanceof Error?error.message:"Failed to submit feedback. Please try again.")}}}),captureScreenshot=(0,react.useCallback)(async()=>{try{const{toPng}=await __webpack_require__.e(777).then(__webpack_require__.bind(__webpack_require__,"./node_modules/html-to-image/es/index.js")),screenshot=await toPng(document.body,{cacheBust:!0,pixelRatio:1,skipFonts:!0,skipAutoScale:!0,filter:node=>{var _node_classList,_node_src;return!(null===(_node_classList=node.classList)||void 0===_node_classList?void 0:_node_classList.contains("ProseMirror-separator"))&&("IMG"!==node.tagName||!(null===(_node_src=node.src)||void 0===_node_src?void 0:_node_src.includes("data:")))}});setImage(screenshot)}catch(error){MobileFeedbackComponent_console.error("Failed to take screenshot:",error),setImage(""),dist.Ay.error("Failed to capture screenshot")}},[]);react.useEffect(()=>{open?(captureScreenshot(),setDimensions({width:window.innerWidth,height:Math.floor(.4*window.innerHeight)})):(formik.resetForm(),setImage(""))},[open]);return(0,jsx_runtime.jsxs)(Dialog.A,{open,onClose:handleCloseInternal,fullScreen:!0,sx:{"& .MuiDialog-paper":{display:"flex",flexDirection:"column"}},children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{p:1,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",flexShrink:0},children:[(0,jsx_runtime.jsx)(IconButton.A,{"aria-label":"back",onClick:handleCloseInternal,size:"small",children:(0,jsx_runtime.jsx)(ArrowBack.A,{})}),(0,jsx_runtime.jsx)(Chip.A,{icon:"mobile"===screenSize?(0,jsx_runtime.jsx)(PhoneAndroid.A,{}):"tablet"===screenSize?(0,jsx_runtime.jsx)(Tablet.A,{}):(0,jsx_runtime.jsx)(Computer.A,{}),label:screenSize.toUpperCase(),color:"mobile"===screenSize?"success":"tablet"===screenSize?"warning":"primary",size:"small"})]}),(0,jsx_runtime.jsxs)(DialogContent.A,{sx:{p:0,flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,jsx_runtime.jsx)(Box.A,{sx:{position:"relative",bgcolor:"#f5f5f5",height:"40vh",flexShrink:0,overflow:"hidden"},children:image?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("img",{src:image,alt:"Screenshot",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}}),(0,jsx_runtime.jsx)(Box.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2},children:(0,jsx_runtime.jsx)(Box.A,{sx:{position:"relative",width:dimensions.width,height:dimensions.height,pointerEvents:"auto"},children:(0,jsx_runtime.jsx)(MobileFeedbackComponent_CanvasDraw,{ref:canvasRef,canvasWidth:dimensions.width,canvasHeight:dimensions.height,brushColor:"#ff0000",brushRadius:2,lazyRadius:0,hideGrid:!0,backgroundColor:"transparent"})})})]}):(0,jsx_runtime.jsxs)(Box.A,{sx:{textAlign:"center",px:2,py:3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Failed to capture screenshot"}),(0,jsx_runtime.jsx)(Typography.A,{variant:"caption",color:"text.secondary",sx:{mb:2},children:"Upload a screenshot manually"}),(0,jsx_runtime.jsxs)(Button.A,{variant:"contained",component:"label",size:"small",children:["Upload",(0,jsx_runtime.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{var _e_target_files;const file=null===(_e_target_files=e.target.files)||void 0===_e_target_files?void 0:_e_target_files[0];file&&handleUploadImage(file)}})]})]})}),(0,jsx_runtime.jsxs)(Box.A,{sx:{p:1,display:"flex",gap:1,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",flexShrink:0},children:[(0,jsx_runtime.jsx)(Button.A,{variant:"outlined",color:"secondary",onClick:clearDrawing,size:"small",sx:{flex:1,minWidth:0},children:"Reset"}),(0,jsx_runtime.jsx)(Button.A,{variant:"outlined",color:"primary",onClick:undoLastDrawing,size:"small",sx:{flex:1,minWidth:0},children:"Undo"})]}),(0,jsx_runtime.jsxs)(Box.A,{sx:{flex:1,overflowY:"auto",p:2},children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"caption",color:"text.secondary",sx:{mb:2,display:"block"},children:"ðŸ’¡ Draw on the screenshot above"}),(0,jsx_runtime.jsxs)("form",{onSubmit:formik.handleSubmit,children:[(0,jsx_runtime.jsxs)(FormControl.A,{fullWidth:!0,margin:"normal",size:"small",children:[(0,jsx_runtime.jsx)(InputLabel.A,{id:"mobile-feedbackType-label",children:"Feedback Type"}),(0,jsx_runtime.jsxs)(Select.A,{labelId:"mobile-feedbackType-label",id:"mobile-feedbackType",name:"feedbackType",value:formik.values.feedbackType,onChange:formik.handleChange,error:formik.touched.feedbackType&&Boolean(formik.errors.feedbackType),label:"Feedback Type",children:[(0,jsx_runtime.jsx)(MenuItem.A,{value:"bug",children:"Bug"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"feature",children:"Feature Request"}),(0,jsx_runtime.jsx)(MenuItem.A,{value:"other",children:"Other"})]}),formik.touched.feedbackType&&formik.errors.feedbackType&&(0,jsx_runtime.jsx)(Box.A,{sx:{color:"error.main",fontSize:"0.75rem",mt:.5},children:formik.errors.feedbackType})]}),(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,margin:"normal",id:"mobile-description",name:"description",label:"Description",multiline:!0,rows:4,value:formik.values.description,onChange:formik.handleChange,error:formik.touched.description&&Boolean(formik.errors.description),helperText:formik.touched.description&&formik.errors.description,size:"small"}),(0,jsx_runtime.jsx)(Button.A,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:2},children:"Submit Feedback"})]})]})]})]})}function MaterialFeedbackButton({userEmail=null,apiBasePath="/api/feedback",additionalHeaders={},hideIfNoEmail=!1,appId,formAsDialog=!1,placement="bottom-right"}){const[dialogOpen,setDialogOpen]=(0,react.useState)(!1),[isClient,setIsClient]=(0,react.useState)(!1),theme=(0,useTheme.A)(),isMobile=(0,useMediaQuery.A)(theme.breakpoints.down("sm")),isTablet=(0,useMediaQuery.A)(theme.breakpoints.between("sm","md")),getScreenSize=((0,useMediaQuery.A)(theme.breakpoints.up("md")),()=>isMobile?"mobile":isTablet?"tablet":"desktop");if((0,react.useEffect)(()=>{setIsClient(!0)},[]),hideIfNoEmail&&!userEmail)return null;return isClient?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Button.A,{sx:{...(()=>{if("parent"===placement)return{position:"relative"};const baseStyles={position:"fixed",zIndex:1e3};switch(placement){case"bottom-right":default:return{...baseStyles,bottom:20,right:20};case"bottom-left":return{...baseStyles,bottom:20,left:20};case"bottom-center":return{...baseStyles,bottom:20,left:"50%",transform:"translateX(-50%)"};case"top-right":return{...baseStyles,top:20,right:20};case"top-left":return{...baseStyles,top:20,left:20};case"top-center":return{...baseStyles,top:20,left:"50%",transform:"translateX(-50%)"};case"right-middle":return{...baseStyles,right:20,top:"50%",transform:"translateY(-50%) rotate(-90deg)",transformOrigin:"right center"};case"left-middle":return{...baseStyles,left:20,top:"50%",transform:"translateY(-50%) rotate(90deg)",transformOrigin:"left center"}}})(),backgroundColor:"white",padding:"10px 20px",minWidth:{xs:"auto",sm:"auto"}},color:"error",onClick:()=>setDialogOpen(!0),children:[(0,jsx_runtime.jsx)(Box.A,{component:"span",sx:{display:{xs:"none",sm:"inline"}},children:"Feedback"}),(0,jsx_runtime.jsx)(Feedback.A,{sx:{marginLeft:{xs:0,sm:1}}})]}),isMobile?(0,jsx_runtime.jsx)(MobileFeedbackComponent,{open:dialogOpen,onClose:()=>setDialogOpen(!1),userEmail,apiBasePath,additionalHeaders,appId,screenSize:getScreenSize()}):(0,jsx_runtime.jsx)(DesktopFeedbackComponent,{open:dialogOpen,onClose:()=>setDialogOpen(!1),userEmail,apiBasePath,additionalHeaders,appId,formAsDialog,screenSize:getScreenSize()})]}):null}MobileFeedbackComponent.__docgenInfo={description:"",methods:[],displayName:"MobileFeedbackComponent",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},userEmail:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},apiBasePath:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"/api/feedback"',computed:!1}},additionalHeaders:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:"",defaultValue:{value:"{}",computed:!1}},appId:{required:!1,tsType:{name:"string"},description:""},screenSize:{required:!0,tsType:{name:"union",raw:'"mobile" | "tablet" | "desktop"',elements:[{name:"literal",value:'"mobile"'},{name:"literal",value:'"tablet"'},{name:"literal",value:'"desktop"'}]},description:""}}},MaterialFeedbackButton.__docgenInfo={description:"",methods:[],displayName:"MaterialFeedbackButton",props:{userEmail:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},apiBasePath:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"/api/feedback"',computed:!1}},additionalHeaders:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:"",defaultValue:{value:"{}",computed:!1}},hideIfNoEmail:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},appId:{required:!1,tsType:{name:"string"},description:""},formAsDialog:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},placement:{required:!1,tsType:{name:"union",raw:"| 'bottom-right'\n| 'bottom-left'\n| 'bottom-center'\n| 'top-right'\n| 'top-left'\n| 'top-center'\n| 'right-middle'\n| 'left-middle'\n| 'parent'",elements:[{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-center'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-center'"},{name:"literal",value:"'right-middle'"},{name:"literal",value:"'left-middle'"},{name:"literal",value:"'parent'"}]},description:"",defaultValue:{value:"'bottom-right'",computed:!1}}}};const MaterialFeedbackButton_stories={title:"Material/MaterialFeedbackButton",component:MaterialFeedbackButton,parameters:{layout:"fullscreen",msw:{handlers:__webpack_require__("./src/mocks/handlers.ts").Y}},tags:["autodocs"],argTypes:{userEmail:{control:"text",description:"User email for feedback submission"},apiBasePath:{control:"text",description:"Backend API base path for feedback endpoints"},additionalHeaders:{control:"object",description:"Additional headers for API requests"},hideIfNoEmail:{control:"boolean",description:"Hide button if no user email provided"},appId:{control:"text",description:"Application ID for tracking"},formAsDialog:{control:"boolean",description:"Show form as a centered dialog instead of a drawer"},placement:{control:"select",options:["bottom-right","bottom-left","bottom-center","top-right","top-left","top-center","right-middle","left-middle","parent"],description:"Button placement on screen"}}},Default={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",additionalHeaders:{},hideIfNoEmail:!1,formAsDialog:!1,placement:"bottom-right"}},FormAsDialog={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",additionalHeaders:{},hideIfNoEmail:!1,formAsDialog:!0,placement:"bottom-right"}},BottomLeft={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"bottom-left"}},BottomCenter={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"bottom-center"}},TopRight={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"top-right"}},TopLeft={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"top-left"}},TopCenter={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"top-center"}},RightMiddle={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"right-middle"}},LeftMiddle={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"left-middle"}},ParentPositioning={args:{userEmail:"user@example.com",apiBasePath:"/api/v1/feedback",placement:"parent"},decorators:[Story=>(0,jsx_runtime.jsxs)("div",{style:{padding:"20px",display:"flex",gap:"10px",alignItems:"center"},children:[(0,jsx_runtime.jsx)("p",{children:"This button uses parent positioning and flows with the layout:"}),(0,jsx_runtime.jsx)(Story,{})]})]},__namedExportsOrder=["Default","FormAsDialog","BottomLeft","BottomCenter","TopRight","TopLeft","TopCenter","RightMiddle","LeftMiddle","ParentPositioning"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    additionalHeaders: {},\n    hideIfNoEmail: false,\n    formAsDialog: false,\n    placement: 'bottom-right'\n  }\n}",...Default.parameters?.docs?.source},description:{story:"Simple feedback button that appears fixed in the bottom right corner.\nClick to capture screenshot, draw annotations, and submit feedback.\nForm appears as a right-side drawer.",...Default.parameters?.docs?.description}}},FormAsDialog.parameters={...FormAsDialog.parameters,docs:{...FormAsDialog.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    additionalHeaders: {},\n    hideIfNoEmail: false,\n    formAsDialog: true,\n    placement: 'bottom-right'\n  }\n}",...FormAsDialog.parameters?.docs?.source},description:{story:"Feedback button with form displayed as a centered dialog instead of a drawer.\nThis variant is useful when you want the form to be more prominent and centered.",...FormAsDialog.parameters?.docs?.description}}},BottomLeft.parameters={...BottomLeft.parameters,docs:{...BottomLeft.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'bottom-left'\n  }\n}",...BottomLeft.parameters?.docs?.source},description:{story:"Button positioned at bottom-left corner.",...BottomLeft.parameters?.docs?.description}}},BottomCenter.parameters={...BottomCenter.parameters,docs:{...BottomCenter.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'bottom-center'\n  }\n}",...BottomCenter.parameters?.docs?.source},description:{story:"Button positioned at bottom-center.",...BottomCenter.parameters?.docs?.description}}},TopRight.parameters={...TopRight.parameters,docs:{...TopRight.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'top-right'\n  }\n}",...TopRight.parameters?.docs?.source},description:{story:"Button positioned at top-right corner.",...TopRight.parameters?.docs?.description}}},TopLeft.parameters={...TopLeft.parameters,docs:{...TopLeft.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'top-left'\n  }\n}",...TopLeft.parameters?.docs?.source},description:{story:"Button positioned at top-left corner.",...TopLeft.parameters?.docs?.description}}},TopCenter.parameters={...TopCenter.parameters,docs:{...TopCenter.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'top-center'\n  }\n}",...TopCenter.parameters?.docs?.source},description:{story:"Button positioned at top-center.",...TopCenter.parameters?.docs?.description}}},RightMiddle.parameters={...RightMiddle.parameters,docs:{...RightMiddle.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'right-middle'\n  }\n}",...RightMiddle.parameters?.docs?.source},description:{story:"Button positioned at right-middle (rotated vertically).",...RightMiddle.parameters?.docs?.description}}},LeftMiddle.parameters={...LeftMiddle.parameters,docs:{...LeftMiddle.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'left-middle'\n  }\n}",...LeftMiddle.parameters?.docs?.source},description:{story:"Button positioned at left-middle (rotated vertically).",...LeftMiddle.parameters?.docs?.description}}},ParentPositioning.parameters={...ParentPositioning.parameters,docs:{...ParentPositioning.parameters?.docs,source:{originalSource:"{\n  args: {\n    userEmail: 'user@example.com',\n    apiBasePath: '/api/v1/feedback',\n    placement: 'parent'\n  },\n  decorators: [Story => <div style={{\n    padding: '20px',\n    display: 'flex',\n    gap: '10px',\n    alignItems: 'center'\n  }}>\n        <p>This button uses parent positioning and flows with the layout:</p>\n        <Story />\n      </div>]\n}",...ParentPositioning.parameters?.docs?.source},description:{story:"Button with parent positioning (relative) - can be used inline within your layout.\nThis variant renders as a regular button that follows normal document flow.",...ParentPositioning.parameters?.docs?.description}}}}}]);