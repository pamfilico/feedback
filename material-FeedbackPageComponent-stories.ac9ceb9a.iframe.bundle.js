"use strict";(self.webpackChunk_pamfilico_feedback=self.webpackChunk_pamfilico_feedback||[]).push([[486],{"./src/material/FeedbackPageComponent.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithAuthHeaders:()=>WithAuthHeaders,WithCustomContainer:()=>WithCustomContainer,WithEditCallback:()=>WithEditCallback,__namedExportsOrder:()=>__namedExportsOrder,default:()=>FeedbackPageComponent_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js"),Container=__webpack_require__("./node_modules/@mui/material/esm/Container/Container.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/esm/CircularProgress/CircularProgress.js"),List=__webpack_require__("./node_modules/@mui/material/esm/List/List.js"),ListItem=__webpack_require__("./node_modules/@mui/material/esm/ListItem/ListItem.js"),Card=__webpack_require__("./node_modules/@mui/material/esm/Card/Card.js"),CardContent=__webpack_require__("./node_modules/@mui/material/esm/CardContent/CardContent.js"),Chip=__webpack_require__("./node_modules/@mui/material/esm/Chip/Chip.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Pagination=__webpack_require__("./node_modules/@mui/material/esm/Pagination/Pagination.js"),Dialog=__webpack_require__("./node_modules/@mui/material/esm/Dialog/Dialog.js"),AppBar=__webpack_require__("./node_modules/@mui/material/esm/AppBar/AppBar.js"),Toolbar=__webpack_require__("./node_modules/@mui/material/esm/Toolbar/Toolbar.js"),IconButton=__webpack_require__("./node_modules/@mui/material/esm/IconButton/IconButton.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),dist=__webpack_require__("./node_modules/react-hot-toast/dist/index.mjs"),Edit=__webpack_require__("./node_modules/@mui/icons-material/esm/Edit.js"),PhoneAndroid=__webpack_require__("./node_modules/@mui/icons-material/esm/PhoneAndroid.js"),Tablet=__webpack_require__("./node_modules/@mui/icons-material/esm/Tablet.js"),Computer=__webpack_require__("./node_modules/@mui/icons-material/esm/Computer.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/esm/Close.js"),FeedbackEditPageComponent=__webpack_require__("./src/material/FeedbackEditPageComponent.tsx"),DesktopEditFeedbackComponent=__webpack_require__("./src/material/DesktopEditFeedbackComponent.tsx"),MobileEditFeedbackComponent=__webpack_require__("./src/material/MobileEditFeedbackComponent.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function FeedbackPageComponent({apiBaseUrl,onClickEditButtonFeedbackItem,additionalHeaders={}}){const[feedbacks,setFeedbacks]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!0),[currentPage,setCurrentPage]=(0,react.useState)(1),[pagination,setPagination]=(0,react.useState)(null),[editDialogOpen,setEditDialogOpen]=(0,react.useState)(!1),[selectedFeedbackId,setSelectedFeedbackId]=(0,react.useState)(null),fetchFeedbacks=async(page=1)=>{setLoading(!0);try{var _response_data;const params=new URLSearchParams({page:page.toString(),limit:"20"}),response=await axios.A.get(`${apiBaseUrl}/api/v1/feedback?${params.toString()}`,{headers:additionalHeaders});(null===(_response_data=response.data)||void 0===_response_data?void 0:_response_data.success)&&(setFeedbacks(response.data.data.items||[]),setPagination(response.data.data.pagination))}catch(error){console.error("Error fetching feedbacks:",error),dist.Ay.error("Failed to load feedbacks")}finally{setLoading(!1)}};(0,react.useEffect)(()=>{fetchFeedbacks(currentPage)},[currentPage]);const getTypeColor=type=>{switch(type){case"bug":return"error";case"feature":return"primary";default:return"default"}},getScreenSizeIcon=screensize=>{switch(screensize){case"mobile":return(0,jsx_runtime.jsx)(PhoneAndroid.A,{fontSize:"small"});case"tablet":return(0,jsx_runtime.jsx)(Tablet.A,{fontSize:"small"});case"desktop":return(0,jsx_runtime.jsx)(Computer.A,{fontSize:"small"});default:return null}},handleCloseDialog=()=>{setEditDialogOpen(!1),setSelectedFeedbackId(null)};return(0,jsx_runtime.jsxs)(Box.A,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[(0,jsx_runtime.jsx)(Container.A,{maxWidth:"lg",sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column",pb:0},children:loading?(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,jsx_runtime.jsx)(CircularProgress.A,{})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{flex:1,overflow:"auto",pr:1,pb:10},children:[(0,jsx_runtime.jsx)(List.A,{sx:{width:"100%",py:0},children:feedbacks.map(feedback=>{return(0,jsx_runtime.jsx)(ListItem.Ay,{sx:{px:0,py:1},children:(0,jsx_runtime.jsx)(Card.A,{sx:{width:"100%"},children:(0,jsx_runtime.jsxs)(CardContent.A,{children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,jsx_runtime.jsxs)(Box.A,{children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",gap:1,mb:1},children:[(0,jsx_runtime.jsx)(Chip.A,{label:feedback.type_of||"other",color:getTypeColor(feedback.type_of),size:"small"}),feedback.material_ui_screensize&&(0,jsx_runtime.jsx)(Chip.A,{icon:getScreenSizeIcon(feedback.material_ui_screensize)||void 0,label:feedback.material_ui_screensize,size:"small",variant:"outlined"})]}),(0,jsx_runtime.jsx)(Typography.A,{variant:"caption",display:"block",color:"text.secondary",children:(dateString=feedback.created_at,new Date(dateString).toLocaleString())})]}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[feedback.softwarefast_task_id&&(0,jsx_runtime.jsx)(Chip.A,{label:`Task: ${feedback.softwarefast_task_id}`,size:"small",variant:"outlined"}),(0,jsx_runtime.jsx)(IconButton.A,{size:"small",color:"primary",onClick:()=>(feedback=>{setSelectedFeedbackId(feedback.id),setEditDialogOpen(!0),onClickEditButtonFeedbackItem&&onClickEditButtonFeedbackItem(feedback.id)})(feedback),"aria-label":"edit feedback",children:(0,jsx_runtime.jsx)(Edit.A,{})})]})]}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",sx:{mb:2,whiteSpace:"pre-wrap"},children:feedback.message}),feedback.current_url&&(0,jsx_runtime.jsxs)(Typography.A,{variant:"caption",color:"text.secondary",display:"block",children:["URL: ",feedback.current_url]}),feedback.image&&(0,jsx_runtime.jsx)(Box.A,{sx:{mt:2},children:(0,jsx_runtime.jsx)("img",{src:feedback.image,alt:"Feedback screenshot",style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px",border:"1px solid #e0e0e0"}})})]})})},feedback.id);var dateString})}),0===feedbacks.length&&(0,jsx_runtime.jsxs)(Box.A,{textAlign:"center",py:8,children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"No feedback submitted yet"}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",color:"text.secondary",children:"Your submitted feedback will appear here"})]})]}),pagination&&pagination.total_pages>1&&(0,jsx_runtime.jsx)(Box.A,{sx:{py:2,display:"flex",justifyContent:"center",borderTop:"1px solid #e0e0e0"},children:(0,jsx_runtime.jsx)(Pagination.A,{count:pagination.total_pages,page:currentPage,onChange:(event,value)=>{setCurrentPage(value)},color:"primary"})})]})}),(0,jsx_runtime.jsxs)(Dialog.A,{fullScreen:!0,open:editDialogOpen,onClose:handleCloseDialog,children:[(0,jsx_runtime.jsx)(AppBar.A,{sx:{position:"relative"},children:(0,jsx_runtime.jsxs)(Toolbar.A,{children:[(0,jsx_runtime.jsx)(Typography.A,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Edit Feedback"}),(0,jsx_runtime.jsx)(IconButton.A,{edge:"end",color:"inherit",onClick:handleCloseDialog,"aria-label":"close",children:(0,jsx_runtime.jsx)(Close.A,{})})]})}),selectedFeedbackId&&(0,jsx_runtime.jsx)(FeedbackEditPageComponent.A,{apiBaseUrl,feedbackId:selectedFeedbackId,additionalHeaders,onUpdate:feedbackId=>{handleCloseDialog(),fetchFeedbacks(currentPage),dist.Ay.success("Feedback updated successfully!")},onCancel:handleCloseDialog,desktopComponent:DesktopEditFeedbackComponent.A,mobileComponent:MobileEditFeedbackComponent.A})]})]})}FeedbackPageComponent.__docgenInfo={description:"",methods:[],displayName:"FeedbackPageComponent",props:{apiBaseUrl:{required:!0,tsType:{name:"string"},description:""},onClickEditButtonFeedbackItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(feedbackId: string) => void",signature:{arguments:[{type:{name:"string"},name:"feedbackId"}],return:{name:"void"}}},description:""},additionalHeaders:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:"",defaultValue:{value:"{}",computed:!1}}}};var handlers=__webpack_require__("./src/mocks/handlers.ts"),FeedbackPageComponent_stories_console=__webpack_require__("./node_modules/console-browserify/index.js");const FeedbackPageComponent_stories={title:"Material/FeedbackPageComponent",component:FeedbackPageComponent,parameters:{layout:"fullscreen",msw:{handlers:handlers.Y}},tags:["autodocs"],argTypes:{apiBaseUrl:{control:"text",description:"Backend API base URL"},onClickEditButtonFeedbackItem:{action:"edit-clicked",description:"Callback when edit button is clicked"},additionalHeaders:{control:"object",description:"Additional headers for API requests"}}},Default={args:{apiBaseUrl:"",additionalHeaders:{}}},WithAuthHeaders={args:{apiBaseUrl:"",additionalHeaders:{Authorization:"Bearer mock-token-123","X-Custom-Header":"custom-value"}}},WithEditCallback={args:{apiBaseUrl:"",onClickEditButtonFeedbackItem:feedbackId=>{FeedbackPageComponent_stories_console.log("Edit clicked for feedback:",feedbackId),alert(`Editing feedback: ${feedbackId}`)},additionalHeaders:{}}},WithCustomContainer={args:{apiBaseUrl:"",additionalHeaders:{}},decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{background:"#f5f5f5",minHeight:"100vh",padding:"20px"},children:(0,jsx_runtime.jsx)(Story,{})})]},__namedExportsOrder=["Default","WithAuthHeaders","WithEditCallback","WithCustomContainer"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiBaseUrl: '',\n    additionalHeaders: {}\n  }\n}",...Default.parameters?.docs?.source},description:{story:"Default feedback page showing a list of feedback items.\nDisplays paginated feedback with device indicators and type badges.",...Default.parameters?.docs?.description}}},WithAuthHeaders.parameters={...WithAuthHeaders.parameters,docs:{...WithAuthHeaders.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiBaseUrl: '',\n    additionalHeaders: {\n      'Authorization': 'Bearer mock-token-123',\n      'X-Custom-Header': 'custom-value'\n    }\n  }\n}",...WithAuthHeaders.parameters?.docs?.source},description:{story:"Feedback page with authentication headers.\nUse this when your API requires authentication tokens.",...WithAuthHeaders.parameters?.docs?.description}}},WithEditCallback.parameters={...WithEditCallback.parameters,docs:{...WithEditCallback.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiBaseUrl: '',\n    onClickEditButtonFeedbackItem: (feedbackId: string) => {\n      console.log('Edit clicked for feedback:', feedbackId);\n      alert(`Editing feedback: ${feedbackId}`);\n    },\n    additionalHeaders: {}\n  }\n}",...WithEditCallback.parameters?.docs?.source},description:{story:"Feedback page with edit callback.\nThe callback is triggered when clicking the edit button on a feedback item.",...WithEditCallback.parameters?.docs?.description}}},WithCustomContainer.parameters={...WithCustomContainer.parameters,docs:{...WithCustomContainer.parameters?.docs,source:{originalSource:"{\n  args: {\n    apiBaseUrl: '',\n    additionalHeaders: {}\n  },\n  decorators: [Story => <div style={{\n    background: '#f5f5f5',\n    minHeight: '100vh',\n    padding: '20px'\n  }}>\n        <Story />\n      </div>]\n}",...WithCustomContainer.parameters?.docs?.source},description:{story:"Feedback page with custom styling container.",...WithCustomContainer.parameters?.docs?.description}}}}}]);